if (self.CavalryLogger) { CavalryLogger.start_js(["f\/Yv0"]); }

__d("LiveJoinGroupCtaClickFalcoEvent",["FalcoLoggerInternal"],(function(a,b,c,d,e,f){"use strict";a=b("FalcoLoggerInternal").create("live_join_group_cta_click");e.exports=a}),null);
__d("LiveJoinGroupCtaLogger",["EventListener","LiveJoinGroupCtaClickFalcoEvent"],(function(a,b,c,d,e,f){a={onClickListener:function(a,c,d,e,f){b("EventListener").listen(a,"click",function(){b("LiveJoinGroupCtaClickFalcoEvent").log(function(){return{attachment_id:c,source:d,membership:e,feed_location:f}})})}};e.exports=a}),null);
__d("CommercialBreakSkywalkerSubscriptionManager",["SkywalkerManager"],(function(a,b,c,d,e,f){var g=new Map(),h=new Map();a={subscribe:function(a,c){if(!g.has(a)){var d=[];g.set(a,d);var e=b("SkywalkerManager").subscribe(a,function(a){for(var b=0;b<d.length;b++){var c=d[b];c(a)}});h.set(a,e)}e=g.get(a);e&&e.push(c);return h.get(a)}};e.exports=a}),null);
__d("CommercialBreakWithSqueezeback",["csx","cx","CSS","DOMDimensions","DOMQuery","QE2Logger"],(function(a,b,c,d,e,f,g,h){"use strict";var i=.25,j=.025;a=function(){function a(a){var b=this;this.$1=a;this.$1.registerOption("CommercialBreakWithSqueezeback","controller",function(){return b});this.$4=a.addListener("optionsChange",function(){return b.$7()});this.$7()}var c=a.prototype;c.$7=function(){var a=this;this.$2=this.$1.getOption("VideoWithInstreamVideo","controller");this.$3=this.$1.getOption("VideoWithCommercialBreak","controller");var b=this.$2,c=this.$3;if(!b||!c)return;this.$4.remove();this.$5=b.getConfig();c.addListener("commercialBreak/stateChange",function(b){b=b.state;switch(b){case"INIT":a.isEligibleForSqueezeback(b)&&a.$8();break;case"ENTERING_TRANSITION":a.isEligibleForSqueezeback()&&a.$9();break;case"PLAY_AD":a.isEligibleForSqueezeback()&&a.$10();break;case"LEAVING_TRANSITION":a.isEligibleForSqueezeback()&&a.$11();break}})};c.$9=function(){var a=this.$1.getVideoNode();this.$6=a.videoHeight/a.videoWidth*b("DOMDimensions").getElementDimensions(a).width;var c=a.parentElement;if(!c)return;b("CSS").addClass(c,"_7-4w");b("CSS").addClass(c,"_7-6f");b("CSS").addClass(a,"_7zep");b("CSS").addClass(a,"_7zd9")};c.$12=function(a,c,d){a=b("DOMDimensions").getElementDimensions(a).width;var e=a*(1-i)-a*j*3,f=e*(d.videoHeight/d.videoWidth);if(f>this.$6-2*a*j){f=this.$6-2*a*j;e=f*(d.videoWidth/d.videoHeight);d=(a-e-a*i-a*j)/2;c.style.setProperty("left",d+"px")}c.style.setProperty("width",e+"px");c.style.setProperty("height",f+"px")};c.$10=function(){if(!this.$2)return;var a=this.$2.getAdController(),c=this.$1.getVideoNode();c=c.parentElement;if(a){a=a.getVideoNode();var d=a.parentElement;if(!(d instanceof HTMLElement)||!(c instanceof HTMLElement))return;b("CSS").addClass(d,"_7-4w");b("CSS").addClass(d,"_7zda");this.$12(c,d,a);b("CSS").addClass(d,"_7zxr")}c=b("DOMQuery").scry(this.$1.getRootNode(),"._4wd3");c[0]&&b("CSS").addClass(c[0],"_7zdb");a=b("DOMQuery").scry(this.$1.getRootNode(),"._3chq");if(a[0]){d=a[0].parentElement;if(d){(c=b("CSS")).addClass(d,"_7-4w");c.addClass(d,"_7zxs");c.addClass(a[0],"_7zs1");d.style.setProperty("height",this.$6+"px");c.addClass(a[0],"_7zxr")}}d=b("DOMQuery").scry(this.$1.getRootNode(),"._3_gy");d[0]&&b("CSS").addClass(d[0],"_7-3g")};c.$11=function(){var a=this.$1.getVideoNode(),c=a.parentElement;if(!c)return;b("CSS").addClass(a,"_7zdc")};c.$8=function(){var a=this.$1.getVideoNode(),c=a.parentElement;if(c){var d;(d=b("CSS")).removeClass(c,"_7-4w");d.removeClass(c,"_7-6f");d.removeClass(a,"_7zep");d.removeClass(a,"_7zd9");d.removeClass(a,"_7zdc")}};c.isEligibleForSqueezeback=function(a){var c=this.$2,d=this.$5;if(!d||!d.isLive||!c||c.getCurrentInstreamPlacement()!=="mid_roll")return!1;if(a==="INIT")return d.squeezebackEnabled;b("QE2Logger").logExposureForUser(d.squeezebackQEName);return d.squeezebackEnabled};return a}();e.exports=a}),null);
__d("LiveWithCommercialBreak",["CommercialBreakSkywalkerSubscriptionManager","DateConsts","Visibility","clearTimeout","setTimeout"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a,b,c){var d=this;this.$1=a;this.$6=b;this.$8=!1;this.$9=-1;this.$10={};this.$14=!1;this.$12=!1;this.$13=!1;this.$21=null;c&&(this.$11=c,this.$16=c.nonInterruptiveAdInsertionDelay,this.$17=Math.max(this.$16-c.nonInterruptiveAdFetchDelay,0));this.$1.registerOption("LiveWithCommercialBreak","controller",function(){return d});this.$5=a.addListener("optionsChange",function(){return d.$23()});this.$23()}var c=a.prototype;c.$23=function(){var a=this;this.$2=this.$1.getOption("VideoWithInstreamVideo","controller");this.$3=this.$1.getOption("VideoWithCommercialBreak","controller");this.$4=this.$1.getOption("CommercialBreakWithSqueezeback","controller");if(!this.$2||!this.$3)return;if(this.$2.getConfig().unifiedSchedulerEnabled&&!this.$4)return;this.$5.remove();this.$7&&!this.$7.isUnsubscribed()&&(this.$8=!0,this.$3.setIsDuplicateLiveVideo(this.$8));this.$7=b("CommercialBreakSkywalkerSubscriptionManager").subscribe(this.$6,this.$24.bind(this));var c=this.$2.getConfig();this.$22=c;c&&c.unifiedSchedulerEnabled&&this.$1.addListener("updateStatus",this.$25.bind(this));this.$7?(this.$2.logMarauderEvent("commercial_break_skywalker_subscription_success"),this.$1.addListener("commercialBreak/scrollAway",function(){a.$9<0&&(a.$9=Date.now())}),this.$1.addListener("commercialBreak/scrollInto",function(){a.$9=-1})):this.$2.logMarauderEvent("commercial_break_skywalker_subscription_failure");this.$1.addListener("beginPlayback",function(){a.$15||(a.$15=a.$26())});if(!this.$11)return;this.$1.isState("playing")&&this.$27();this.$1.addListener("beginPlayback",this.$28.bind(this));this.$1.addListener("beginPlayback",this.$27.bind(this));this.$1.addListener("pausePlayback",this.$29.bind(this));this.$1.addListener("pausePlayback",this.$30.bind(this));this.$1.addListener("buffered",function(){a.$28({position:a.$1.getCurrentTimePosition()}),a.$27()});this.$1.addListener("buffering",function(){a.$29({position:a.$1.getCurrentTimePosition()}),a.$30({position:a.$1.getCurrentTimePosition()})});this.$3.addListener("commercialBreak/nonInterruptiveAdStoryFetched",function(b){a.$20=b,a.$14&&(a.$3&&a.$3.showNonInterruptiveAd())})};c.getIsDuplicateVideo=function(){return this.$8};c.$28=function(a){var c=this;a=a.position;if(this.$14)return;!this.$12&&this.$3&&this.$27();this.$15=a*b("DateConsts").MS_PER_SEC;this.$19=b("setTimeout")(function(){if(!c.$3)return;c.$3.logExposureForNonInterruptiveAd();c.$20&&c.$3.showNonInterruptiveAd();c.$14=!0},this.$16)};c.$29=function(a){a=a.position;if(this.$14)return;this.$16=this.$16-(a*b("DateConsts").MS_PER_SEC-this.$15);b("clearTimeout")(this.$19)};c.$24=function(a){a=JSON.parse(a.payload);if(this.$31(a)){this.$2.logMarauderEvent("commercial_break_skywalker_received_duplicate_event");return}var b=a.type,c=this.$2.getConfig();b==="start"?(this.$10.start=a,this.$3.onLiveStartCommand(a)):b==="intent"?(this.$10.intent=a,c&&c.liveMidRollEnabled&&this.$3.onLiveIntentCommand(Object.assign({lastScrollAwayTime:this.$9},a))):this.$2.logMarauderEvent("commercial_break_skywalker_receive_invalid_message")};c.$27=function(){if(!this.$3.shouldShowNonInterruptiveAd()||this.$1.getPlayerOrigin()==="games_action_links"||this.$13||this.$12)return;this.$13=!0;this.$18=b("setTimeout")(this.$32.bind(this),this.$17)};c.$30=function(a){a=a.position;if(!this.$13||this.$12)return;this.$17=this.$17-(a*b("DateConsts").MS_PER_SEC-this.$15);b("clearTimeout")(this.$18);this.$13=!1};c.$32=function(){if(this.$12)return;this.$3&&this.$3.onIntentCommand(0,"non_interruptive");this.$12=!0};c.$31=function(a){var b=this.$10[a.type];if(!b)return!1;var c=!0;Object.keys(b).forEach(function(d){b[d]!==a[d]&&(c=!1)});return c};c.$26=function(){return this.$1.getCurrentTimePosition()*b("DateConsts").MS_PER_SEC};c.$25=function(){if(b("Visibility").isHidden())return;var a=this.$26(),c=this.$21;if(c==null){a-this.$15>=this.$22.unifiedSchedulerStartDelayMs&&(this.$21=a,this.$3.triggerUnifiedSchedulerFetch(a));return}if(a-c>=this.$22.unifiedSchedulerFrequencyMs){c=this.$3.getLastUnifiedSchedulerAdStartedTimestamp();if(c!=null&&a-c<this.$22.unifiedSchedulerConsecutiveAdFetchIntervalMs)return;this.$21=a;this.$3.triggerUnifiedSchedulerFetch(a)}};return a}();e.exports=a}),null);